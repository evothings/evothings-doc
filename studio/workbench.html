<!DOCTYPE html>
<html>
<!--
File: workbench.html
Description: Evothings Workbench documentation.
Author: Mikael Kindborg
Copyright (c) 2013-2016 Evothings AB
-->
<head>
<meta charset="utf-8">
<script src="../js/include-head.js"></script>
<title>Evothings Workbench</title>
</head>

<body>

<div class="evo-page">
<script src="../js/include-page-header.js"></script>
<div class="evo-content">

<div class="evo-box evo-content-index">
	<script src="../js/include-evothings-logo.js"></script>
	<a href="#Introduction">Evothings Workbench</a><br/>
	<a href="#MainWindow">Main window</a><br/>
	<a href="#Connecting">Connecting from a device</a><br/>
	<a href="#Running">Running an app</a><br/>
	<a href="#CreatingYourOwnProject">Creating your own app</a><br/>
	<a href="#AppFileStructure">Application file structure</a><br/>
	<a href="#LiveEditing">Live editing</a><br/>
	<!--
	<a href="#ConnectingFromHybridApps">Connecting From Hybrid Apps</a><br/>
	-->
	<a href="#UsingCordovaPhoneGap">Using Cordova/PhoneGap</a><br/>
	<a href="#JavaScriptTools">JavaScript Tools</a><br/>
	<a href="#Uninstall">Restore settings and uninstalling</a><br/>
	<a href="#SourceCode">Source code</a><br/>
</div>

<div id="Introduction" class="evo-box">
	<h1>Evothings Workbench</h1>

	<p>The Evothings Workbench is a desktop application for running apps on mobile devices. For an overview of how to get started, see the <a href="../studio/evothings-studio-overview.html#QuickStart">Quick Start</a> section of the main documentation page.</p>

	<p>The Workbench has three windows:</p>
	<ul>
		<li>The main window that handles connect codes and lists projects (apps) you can run on mobile devices.</li>
		<li>The JavaScript Tools window, where you can interactively run code on connected devices and view log output.</li>
		<li>The Feedback section, where your input is superimportant for the evolution of Evothings Studio.</li>
	</ul>

	<p>To run an app on a connected device, press the "Run" button. This will make the local web server used by the Workbench set its base directory to the folder where the main HTML file of the project is located.</p>

	<p>Edit the source code of your apps using your favourite text editor and web development tools. Each time you save a file in the currently running project, it will automatically reload it on connected devices. This also works like a charm when you save images and other resources.</p>
</div>

<div id="MainWindow" class="evo-box">

	<img style="width:400px;height:auto;float:right;margin-left:20px;margin-bottom:20px;"
		src="../images/evothings-workbench-screenshot-2.png"/>

	<h2>Main window</h2>

	<p>The main window has three tabs:</p>
	<ul>
		<li><b>Connect</b>. First tab is for connecting to the Evothings Cloud Server. Here you get a connect key for use in the Viewer app.</li>
		<li><b>Examples</b>. Second tab displays a list of example apps.</li>
		<li><b>My Apps</b>. Third tab is for your own apps.</li>
	</ul>

	<p>When you click the "Run" button, that project will launch on connected devices.</p>

	<p>Click the "Code" button to display the files in the project. From the file list, you can open files in any editor you have installed on your machine.</p>
</div>

<div id="Connecting" class="evo-box">
	<h2>Connecting from a mobile device</h2>

	<p>Before you can run an app on a mobile phone or tablet, you need to connect it to the Workbench. If you are not connected, nothing will display on the device. You can connect from one or many devices concurrently.</p>

	<p>Use Evothings Viewer (available on Google Play and the Apple App Store) to connect to the Workbench and run apps.</p>

	<p>Enter the connect code obtained in the "Connect" tab in the Viewer app, and press the "Connect" button in the app. If the code times out you can easily get a new code from the Workbench. Once connected, there is no time out on the session.</p>
</div>

<div id="Running" class="evo-box">
	<h2>Running an app</h2>

	<p>To run one of the Evothings example apps, make sure the Viewer is connected to the Workbench, then click the "Run" button on the app you wish to run.</p>

	<p>Some of the example apps require that you change settings in the source code for them to work properly. You cannot edit the code of the example apps directly, you need to make a copy first. Click the "Copy" button to do this. It will create a copy of the app under "My Apps". The click "Code" to open a system file browser showing the application files.</p>
</div>

<div id="CreatingYourOwnProject" class="evo-box">
	<h2>Creating your own app</h2>

	<p>To create your own app in "My Apps" you have three options:</p>
	<ul>
		<li>Click the "New" button in the main menu bar.</li>
		<li>Click the "Copy" button on an example app.</li>
		<li>Drag and drop an .html file to the Workbench window.</li>
	</ul>

	<p>How to use the tab "My Apps":</p>
	<ul>
		<li>When clicking "Run" the app is launched in connected mobile devices.</li>
		<li>You can remove app entries listed under "My Apps" by clicking the small close (x) icon. This will not remove files on disk. To add back a removed app, drag and drop the index.html file of the app to the Workbench window.</li>
		<li>Sort the list of apps using drag and drop (note that this is disabled in the "Examples" tab).</li>
		<li>To change the name of the app displayed in the list, edit the &lt;title&gt; tag in file index.html.</li>
		<li>You can change the icon shown in the list by replacing the file app-icon.png in the folder of the app.</li>
		<li>Changes to the app title or the icon will be displayed when you Run of reload the app.</li>
	</ul>
</div>

<div id="AppFileStructure" class="evo-box">
	<h2>Application file structure</h2>

	<p>An Evothings app is just a standard web page. Any web page can be launched as an app in Evothings Viewer.</p>
	<p>When you create an app using the "New" or "Copy" button, you will also get an icon displayed in the list of apps, and a settings file called evothings.json. If you add an app using drag and drop, the file evothings.json will be created for you first time you run the app.</p>
	<p>To make use of the Apache Cordova framework, include the file "cordova.js" in index.html. Check out the example apps for how this is done. "Cordova Accelerometer" is a good example to start with.</p>
	<p>The main HTML file of the app is named "index.html" by convention. Evothings example apps use this naming convention, as do Cordova applications. This file is the entry point of your mobile application. You may name the main HTML file of your app anything you like. Just drag and drop the file onto the Workbench window, and it is added to "My Apps". It is however convenient to follow the convention of using "index.html" for easy compatibility with Cordova and other frameworks.</p>
</div>

<div id="LiveEditing" class="evo-box">
	<h2>Live editing</h2>

	<p>When "Run" is clicked on an app in "My Apps", that app becomes the active app. The files in the app's folder are monitored, and the app is reloaded when any file is updated.</p>

	<p>Currently up to three levels of subdirectories are monitored. The number of levels scanned can be configured in the Settings dialog found under the "More" menu.</p>

	<p>Here is how to live edit an app:</p>
	<ul>
		<li>Click "Run" to make your app the active app.</li>
		<li>Click the "Code" button. This opens a system file browser for the application files.</li>
		<li>Open the file you wish to edit, for example "index.html", in a text editor. Any text editor or IDE should work.</li>
		<li>Change something in the code. For instance, change the &lt;h1&gt; heading to: <pre>&lt;h1&gt;I am alive!&lt;/h1&gt;</pre></li>
		<li>Save the file. The changes you made should be instantly displayed on connected mobile devices.</li>
	</ul>
</div>

<!--
<div id="ConnectingFromHybridApps" class="evo-box">
<h2>Connecting From Hybrid Apps</h2>

<p>You can use Evothings Workbench with hybrid applications, like Cordova apps. Just use the URL displayed in the bottom panel of the Workbench to connect. For example:</p>

<pre>http://192.168.43.226:4042</pre>

<h3>Connecting from an Android app</h3>

<p>Here is an example of how to connect from an Android WebView:</p>

<pre>WebView mWebView = new WebView(this);
mWebView.getSettings().setJavaScriptEnabled(true);
setWebViewClient(new WebViewClient());
// Replace IP-address with the address displayed in the Workbench!
mWebView.loadUrl("http://192.168.43.226:4042");</pre>

<p>Make sure the WebView has JavaScript enabled, and that it has a WebViewClient (otherwise, URLs opened from within the WebView will be opened in an external browser, rather than in the WebView itself).</p>

<h3>Connecting from an iOS app</h3>

<pre>// Create a web view ("self" is the View Controller).
UIWebView* webView = [[UIWebView alloc] initWithFrame: self.view.bounds];

// Example of how to set properties for the web view.
webView.autoresizingMask =
    UIViewAutoresizingFlexibleHeight |
    UIViewAutoresizingFlexibleWidth;
webView.scalesPageToFit = NO;
webView.scrollView.bounces = NO;
self.automaticallyAdjustsScrollViewInsets = NO;

// Replace IP-address with the address displayed in the Workbench!
NSURL* url = [NSURL URLWithString:@"http://192.168.43.226:4042"];

// Connect to the Workbench.
NSURLRequest* request = [NSURLRequest
    requestWithURL: url
    cachePolicy: NSURLRequestReloadIgnoringLocalAndRemoteCacheData
    timeoutInterval: 10];
[webView loadRequest: request];

// Display the web view.
[self.view addSubview: webView];</pre>
</div>
-->

<div id="UsingCordovaPhoneGap" class="evo-box">
	<h2>Using Cordova or PhoneGap</h2>

	<p>Evothings Studio works great when developing apps with Apache Cordova (or Adobe PhoneGap). You can skip the entire build step and get a fast workflow with quick turn-around times.</p>

	<p>The <a href="../build/cordova-guide.html">Cordova Guide</a> contains a step by step description of <a href="../build/cordova-guide.html#SetupCordovaForEvothings">How to use Evothings Studio with a Cordova application</a>.</p>
</div>

<div id="JavaScriptTools" class="evo-box">

	<img style="width:400px;height:auto;float:right;margin-left:20px;margin-bottom:20px;"
		src="../images/evothings-tools-screenshot.png"/>

	<h2>JavaScript Tools</h2>

	<p>Clicking the "Tools" button opens the JavaScript Tools window. This window has two parts; a JavaScript coding space and a log view.</p>

	<p>In the coding space, you can evaluate JavaScript code snippets interactively on connected devices. Just select the code you wish to run, and press the "Eval Selection" button. The selected code is sent to connected devices and evaluated. The return value is displayed in the log view in the bottom panel.</p>

	<p>To display log messages, use the <code>hyper.log()</code> function. The log message is displayed in the lov view. Exemple:</p>

	<pre>hyper.log('Hello World')</pre>

	<p>By using hyper.log() in your code, you can output debug information from connected devices. If you are using console.log() in your existing code base, you can easily create an alias to send the output to the log view. Just include this line first thing in your page:</p>

	<pre>&lt;script&gt;console.log = hyper.log&lt;/script&gt;</pre>

	<p>Button "Eval Selection" evaluates the selected JavaScript code on conencted mobile devices.</p>

	<p>Button "Node Eval" is a special, it evaluates the selected JavaScript code in the Workbench itself. The Workbench is written in nw.js and node.js, and being able to evaluate code in this context is useful for testering service side code, scripting the Workbench, etc.</p>

	<p>The Tools window very is useful for experimenting with code snippets, inspect and modify the state of the running program, and for debugging and debug logging.</p>

</div>

<div id="Uninstall" class="evo-box">

	<h2>Restore settings and uninstalling</h2>

	<p>Here is who to restore Workbench settings and how to remove Evothings Studio from your computer.</p>

	<h3>Clearing all settings</h3>

	<p>Clearing the Workbench settings is useful if you wish to restore original default values.</p>

	<p>Evothings Workbench is written in nw.js. Settings are stored in localStorage.
To clear all settings, open the Tools window, enter and select the following code and click the "Node Eval" button:</p>

	<pre>var gui = require('nw.gui');
localStorage.clear();
gui.App.quit();</pre>

	<p>The above code will clear localStorage and quit the Workbench without saving any settings.</p>

	<p>The "Node Eval" button evaluates the selected code in the nw.js environment in the Workbench itself (this is also a useful and fun way to experiment with code snippets and for scripting the Workbench).</p>

	<h3>Clearing all Workbench data</h3>

	<p>Another way to clear settings is to delete the settings folder for Evothings Workbench.

	<p>The location of this folder can be found by evaluating the following code in the Tools Window using "Node Eval", the result is displayed in the bottom panel:</p>

	<pre>var gui = require('nw.gui');
hyper.log(gui.App.dataPath);</pre>

	<p>Quit the Workbench and delete this folder. When you start the workbench again you will have a clean slate.</p>

	<p>If it does not work to obtain the folder location using the above code snippet, the locations are as follows (replace {username} with your actual user name):</p>

	<p><strong>OS X:</strong></p>

	<pre>/Users/{username}/Library/Application Support/evothings-studio</pre>

	<p><strong>Windows:</strong></p>

	<pre>C:\Users\{username}\AppData\Local\evothings-studio</pre>

	<p><strong>Linux:</strong></p>

	<pre>~/.config/evothings-studio</pre>

	<h3>How to uninstall Evothings Studio</h3>

	<p>To completely remove Evothings Workbench from your computer, delete the settings folder as described above and delete the unzipped Evothings Studio folder.</p>

	<p>If you wish to remove your app files, you also need to delete the folder(s) where they are stored. The default location on all platforms is (where {userhome} is the user home folder):</p>

	<pre>{userhome}/EvothingsStudio/MyApps</pre>

	<p>You can find the location of this folder in the Workbench Settings dialog, open it by selecting the menu More/Settings.</p>

</div>

<div id="SourceCode" class="evo-box">
	<h2>Source code</h2>
	<p>See the <a href="../studio/evothings-studio-overview.html#SourceCode">Source Code</a> section of the main documentation page.</p>
</div>

<script src="../js/include-page-footer.js"></script>
</div><!-- evo-page-content -->
</div><!-- evo-page -->

</body>
</html>
